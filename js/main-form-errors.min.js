document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("form");function t(e){let t=e.nextElementSibling;return t&&t.classList&&t.classList.contains("error-msg")||((t=document.createElement("div")).className="error-msg",e.insertAdjacentElement("afterend",t)),t}function n(e){if(!e||0===e.length)return null;let t=e[0].parentElement;for(;t;){let n=Array.from(e).every(e=>t.contains(e));if(n)return t;t=t.parentElement}return e[0].parentElement}let r=e.querySelector('input[type="email"][name="email"]'),i=e.querySelector('input[name="name"]'),a=e.querySelector('input[type="tel"][name="telephone"]'),l=e.querySelector('textarea[name="message"]');e.querySelector('input[name="website"]');let o=[i,r,l].filter(Boolean);function s(e){if(!e)return!0;let n=(e.value||"").trim();if(!n){let r=t(e);return r.textContent="Toto pole je povinn\xe9.",e.classList.add("invalid"),!1}return!0}function c(e){if(!e)return;let t=e.nextElementSibling;t&&t.classList&&t.classList.contains("error-msg")&&t.remove(),e.classList.remove("invalid")}let u=/^[\w.%+\-]+@[\w.\-]+\.[A-Za-z]{2,}$/;function m(){if(!r)return!0;let e=(r.value||"").trim();if((r.hasAttribute("required")||o.includes(r))&&!s(r))return!1;if(e&&!u.test(e)){let n=t(r);return n.textContent="Zadejte platn\xfd e-mail (např. info@domena.cz).",r.classList.add("invalid"),!1}return c(r),!0}function d(e){if(!e)return!0;let t=e.hasAttribute("required")||o.includes(e);return t?!!s(e)&&(c(e),!0):(c(e),!0)}let f=e.querySelectorAll('input[name="financni-plan"], input[name="hypoteka"], input[name="spotrebitelsky-uver"], input[name="pojisteni"], input[name="zhodnoceni-financi"], input[name="jine"]');function p(){if(!f.length)return!0;let e=Array.from(f).some(e=>e.checked),t=n(Array.from(f))||f[f.length-1].parentElement,r=t.querySelector(":scope > .error-msg");return e?(r&&r.remove(),f.forEach(e=>e.classList.remove("invalid")),!0):(r||((r=document.createElement("div")).className="error-msg",t.appendChild(r)),r.textContent="Vyberte alespoň jednu možnost.",f.forEach(e=>e.classList.add("invalid")),!1)}let v=e.querySelectorAll('input[name="setkani"]');function E(){if(!v.length)return!0;let e=Array.from(v).some(e=>e.checked),t=n(Array.from(v))||v[v.length-1].parentElement,r=t.querySelector(":scope > .error-msg");return e?(r&&r.remove(),v.forEach(e=>e.classList.remove("invalid")),!0):(r||((r=document.createElement("div")).className="error-msg",t.appendChild(r)),r.textContent="Vyberte způsob setk\xe1n\xed.",v.forEach(e=>e.classList.add("invalid")),!1)}e.addEventListener("submit",function(e){let t=!0,n=[i,l,a].filter(Boolean);n.forEach(e=>{d(e)||(t=!1)}),m()||(t=!1),p()||(t=!1),E()||(t=!1),t||e.preventDefault()}),[i,l,a].filter(Boolean).forEach(e=>{e.addEventListener("blur",()=>d(e)),e.addEventListener("input",()=>d(e))}),r&&r.addEventListener("blur",m),f.forEach(e=>e.addEventListener("change",p)),v.forEach(e=>e.addEventListener("change",E))}),inputs.forEach(e=>{e.addEventListener("blur",()=>{"checkbox"!==e.type&&"radio"!==e.type&&validateInput(e)})});